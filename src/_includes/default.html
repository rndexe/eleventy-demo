<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{{title}}
		</title>
		{% if description %}
		<meta name="description" content="{{description}}"/>
		{% endif %}
		{% block head %}{% endblock %}
		<link rel="stylesheet" type="text/css" href="/static/css/style.css"/>
		{% if prism == true %}
		<link rel="stylesheet" type="text/css" href="/static/css/prism-tomorrow.css">
		{% endif %}
		<style>
			.nav-item-active {
				background-color:red;
			}
		</style>
	</head>
	<body>
		<main class="flex">
			<div>
				{% include "./partials/navbar.html" %}
			</div>
			<div class="w-auto fixed ml-20">
				{{ content | safe }}
			</div>

		</main>
		<script src="/static/js/alpine.js"></script>
		<script src="/static/js/scroll.js"></script>

		{% if path == "home" %}
		<!-- Netlify Identity Widget -->
		<!-- Needed only if you are using Netlify Identity feature -->
		<script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
		{% endif %}

		<script>

			//var processElements = document.getElementById("process")
			//console.log(processElements);
			//processElements.id = "process-begin"
			//var main = document.getElementById('main')
			//var exhibit = document.getElementById('exhibit-content')

			//For converting mousewheel scroll into horizontal scroll
			main.addEventListener('wheel', (e) => {
				main.scrollLeft += e.deltaY;
			});

			//var about = document.querySelector('#about');
			//var process = document.querySelector('#process');
			//var scholar = document.querySelector('#scholar');
			//var further = document.querySelector('#further');

			//var aboutnav = document.querySelector('#nav-item-about');
			//var processnav = document.querySelector('#nav-item-process');
			//var scholarnav = document.querySelector('#nav-item-scholar');
			//var furthernav = document.querySelector('#nav-item-further')
			//processnav.addEventListener("click",function() {
			//	document.querySelector('#process').scrollIntoView({behavior: 'smooth'});
			//});
			//function resetNavbar(){
			//	aboutnav.style.color = "#a3a3a3";
			//	aboutnav.style.textDecoration = "none";
			//	processnav.style.color = "#a3a3a3";
			//	processnav.style.textDecoration = "none";
			//	scholarnav.style.color = "#a3a3a3";
			//	scholarnav.style.textDecoration = "none";
			//	furthernav.style.color = "#a3a3a3";
			//	furthernav.style.textDecoration = "none";
			//}

			//document.addEventListener('wheel', () => {
			//	if ((window.scrollX >= about.getBoundingClientRect().left)) {
			//		resetNavbar()
			//		aboutnav.style.color = 'black'
			//		aboutnav.style.textDecoration = 'underline'
			//	}else if ((window.scrollX >= process.getBoundingClientRect().left)) {
			//		resetNavbar()
			//		processnav.style.color = 'red'
			//		processnav.style.textDecoration = 'underline'
			//	}else if ((window.scrollX >= scholar.getBoundingClientRect().left) ) {
			//		resetNavbar()
			//		scholarnav.style.color = 'white'
			//		scholarnav.style.textDecoration = 'underline'
			//	}else if ((window.scrollX >= further.getBoundingClientRect().left) ) {
			//		resetNavbar()
			//		furthernav.style.color = 'black'
			//		furthernav.style.textDecoration = 'underline'
			//	}
			//	
			//})

			
			//For navigation by clicking and dragging
			document.addEventListener('DOMContentLoaded', function() {
				let pos = { top: 0, left: 0, x: 0, y: 0 };
			
				const mouseDownHandler = function(e) {
					main.style.cursor = 'grabbing';
					main.style.userSelect = 'none';
			
					pos = {
						left: main.scrollLeft,
						top: main.scrollTop,
						// Get the current mouse position
						x: e.clientX,
						y: e.clientY,
					};
			
					main.addEventListener('mousemove', mouseMoveHandler);
					main.addEventListener('mouseup', mouseUpHandler);
				};
			
				const mouseMoveHandler = function(e) {
					// How far the mouse has been moved
					const dx = e.clientX - pos.x;
					const dy = e.clientY - pos.y;
			
					// Scroll the element
					main.scrollTop = pos.top - dy;
					main.scrollLeft = pos.left - dx;
				};
			
				const mouseUpHandler = function() {
					main.style.cursor = 'default';
					main.style.removeProperty('user-select');
			
					main.removeEventListener('mousemove', mouseMoveHandler);
					main.removeEventListener('mouseup', mouseUpHandler);
				};
			
				// Attach the handler
				main.addEventListener('mousedown', mouseDownHandler);
			});
		</script>
	</body>
</html>
