<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{{title}}
		</title>
		{% if description %}
		<meta name="description" content="{{description}}"/>
		{% endif %}
		{% block head %}{% endblock %}
		<link rel="stylesheet" type="text/css" href="/static/css/style.css"/>
		{% if prism == true %}
		<link rel="stylesheet" type="text/css" href="/static/css/prism-tomorrow.css">
		{% endif %}
	</head>
	<body>
		<main class="flex">
			<div>
				{% include "./partials/navbar.html" %}
			</div>
			<div class="w-auto fixed ml-20">
				{{ content | safe }}
			</div>

		</main>
		<script src="/static/js/alpine.js"></script>
		<script src="/static/js/scroll.js"></script>

		{% if path == "home" %}
		<!-- Netlify Identity Widget -->
		<!-- Needed only if you are using Netlify Identity feature -->
		<script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
		{% endif %}

		<script>

			var main = document.getElementById('main')
			var exhibit = document.getElementById('exhibit-content')

			//For converting mousewheel scroll into horizontal scroll
			main.addEventListener('wheel', (e) => {
				main.scrollLeft += e.deltaY;
			});

			//For navigation by clicking and dragging
			document.addEventListener('DOMContentLoaded', function() {
				let pos = { top: 0, left: 0, x: 0, y: 0 };
			
				const mouseDownHandler = function(e) {
					main.style.cursor = 'grabbing';
					main.style.userSelect = 'none';
			
					pos = {
						left: main.scrollLeft,
						top: main.scrollTop,
						// Get the current mouse position
						x: e.clientX,
						y: e.clientY,
					};
			
					main.addEventListener('mousemove', mouseMoveHandler);
					main.addEventListener('mouseup', mouseUpHandler);
				};
			
				const mouseMoveHandler = function(e) {
					// How far the mouse has been moved
					const dx = e.clientX - pos.x;
					const dy = e.clientY - pos.y;
			
					// Scroll the element
					main.scrollTop = pos.top - dy;
					main.scrollLeft = pos.left - dx;
				};
			
				const mouseUpHandler = function() {
					main.style.cursor = 'default';
					main.style.removeProperty('user-select');
			
					main.removeEventListener('mousemove', mouseMoveHandler);
					main.removeEventListener('mouseup', mouseUpHandler);
				};
			
				// Attach the handler
				main.addEventListener('mousedown', mouseDownHandler);
			});
		</script>
	</body>
</html>
